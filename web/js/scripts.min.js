$(document).ready(function () {
  //formstyler
  if($('.js-select').length){
    $(function() {
      $('.js-select').styler({
        selectSearch: true,
        onSelectOpened: function() {
            $(this).css('z-index', '110');
        }
      });
    });
  }

  //colorbox
//  $('.js-gallery').colorbox({
//    opacity: 0.5,
//    current: 'фото {current} из {total}',
//    rel: 'group1'
//  });
  
  //fancybox
  $("a.js-gallery").fancybox({
    'transitionIn'	:	'elastic',
    'transitionOut'	:	'elastic',
    'speedIn'		:	600, 
    'speedOut'		:	200, 
    'overlayShow'	:	false
  });
	
  //datepicker
  $( function() {
    $( ".js-datapicker" ).datepicker({			
      beforeShow:function( input, inst ){
		let dp = $(inst.dpDiv);
		let offset = $(input).outerWidth(false) - dp.outerWidth(false);
		dp.css('margin-left', offset);
      }
    });
    $.datepicker.regional[ "ru" ];
  });
  
  //doc-slider            
  $('#js-doc-slider').slick({
    slidesToShow: 5,
    slidesToScroll: 1,
    arrows: false,
    infinite: false,
    customPaging: function (slider, i){return i + 1;},
    dots: true,
    appendDots: $('#js-docs-slider-bar-paginatio'),
    responsive: [
      {
        breakpoint: 1190,
        settings: {
          slidesToShow: 4
        }
      },
      {
        breakpoint: 990,
        settings: {
          slidesToShow: 3
        }
      },
      {
        breakpoint: 768,
        settings: {
          slidesToShow: 2
        }
      }
    ]
  });
  $('#js-docs-slider-bar-next').click(function(){
    $('#js-doc-slider').slick('slickNext');
  });
  $('#js-docs-slider-bar-prev').click(function(){
    $('#js-doc-slider').slick('slickPrev');
  });
  
  //reviews sec slider           
  $('#js-reviews-sec-slider').slick({
    slidesToShow: 2,
    slidesToScroll: 1,
    arrows: false,
    infinite: false,
    customPaging: function (slider, i){return i + 1;},
    dots: true,
    appendDots: $('#js-reviews-sec-paginatio'),
    responsive: [
      {
        breakpoint: 768,
        settings: {
          slidesToShow: 1
        }
      }
    ]
  });
  $('#js-reviews-sec-next').click(function(){
    $('#js-reviews-sec-slider').slick('slickNext');
  });
  $('#js-reviews-sec-prev').click(function(){
    $('#js-reviews-sec-slider').slick('slickPrev');
  });


  
});
$(document).ready(function () {
  //mob-menu
  $('.js-mob-menu-btn').on('click', function(){
    $('#js-mob-menu').toggleClass('open');
    $('html').toggleClass('no-scroll');
  });
  
  //video-popup
  if($('#js-video-vrapper').length){
    var iframe = $('#js-video-container iframe');
	$('.js-blind').on('click', function(){
      var winHeight = $(window).height() / 2,
		  blinPos = $(this).offset().top + ($(this).height() / 2),
		  scrollPos = blinPos - winHeight;
      $('#js-video-vrapper').fadeIn(250).addClass('show');
      $('html, body').animate({ scrollTop: scrollPos}, 250);
      //$('html').add('body').addClass('no-scroll');          

      var srcAttr = $(this).attr('data-href');
      iframe.attr("src", srcAttr + "?autohide=1&amp;autoplay=1");
	});

    $('.js-video-close').on('click', function(){
      $('#js-video-vrapper').fadeOut(250).removeClass('show');
      //$('html').add('body').removeClass('no-scroll');
      iframe.removeAttr("src");
    });
  }

  $(".more-exc").click(function(event){
    //var contNow = 1;
    //var vdd = $('.exc-item').attr('id');
    var id;
    $('.exc-item').each(function( index ) {
      id = $(this).attr('id').toString().slice(-1);
    });
    $.ajax({
      type: "get",
      url: '/excursions/more_exc/?lasting_exc='+id,
      dataType: 'json',
      success: function(result){
        $(".exc-list").append(result['code']);
        if(result['res']){
          $('.more-exc').css("display","none");
        }
      }
    });
    return false;
    event.preventDefault();
  })

  $('input.input-phone').inputmask("99-9999999");

  $( '.price-select>select' ).change(function() {
    let price = 0;
    $('.price-select select').each(function(){
      price = parseInt($(this).attr('priceValue'))*parseInt( ($(this).val() !='') ? $(this).val() : 0 ) + price;
    });
    $('.booking-sec__price-val').html(price);
  });

  
});